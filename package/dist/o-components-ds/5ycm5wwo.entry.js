/*! Built with http://stenciljs.com */
const{h:e}=window.OComponentsDs;var o,t,i,n,a,s=function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")},l=function(){function e(e,o){for(var t=0;t<o.length;t++){var i=o[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(o,t,i){return t&&e(o.prototype,t),i&&e(o,i),o}}(),r=function(e){if(Array.isArray(e)){for(var o=0,t=Array(e.length);o<e.length;o++)t[o]=e[o];return t}return Array.from(e)},d=(o=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],t=function(){function e(o){var t=o.targetModal,i=o.triggers,n=void 0===i?[]:i,a=o.onShow,l=void 0===a?function(){}:a,d=o.onClose,c=void 0===d?function(){}:d,h=o.openTrigger,u=void 0===h?"data-micromodal-trigger":h,m=o.closeTrigger,f=void 0===m?"data-micromodal-close":m,v=o.disableScroll,g=void 0!==v&&v,b=o.disableFocus,y=void 0!==b&&b,p=o.awaitCloseAnimation,w=void 0!==p&&p,k=o.debugMode,E=void 0!==k&&k;s(this,e),this.modal=document.getElementById(t),this.config={debugMode:E,disableScroll:g,openTrigger:u,closeTrigger:f,onShow:l,onClose:c,awaitCloseAnimation:w,disableFocus:y},n.length>0&&this.registerTriggers.apply(this,r(n)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}return l(e,[{key:"registerTriggers",value:function(){for(var e=this,o=arguments.length,t=Array(o),i=0;i<o;i++)t[i]=arguments[i];t.forEach(function(o){o.addEventListener("click",function(){return e.showModal()})})}},{key:"showModal",value:function(){this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add("is-open"),this.setFocusToFirstNode(),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.onShow(this.modal)}},{key:"closeModal",value:function(){var e=this.modal;this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement.focus(),this.config.onClose(this.modal),this.config.awaitCloseAnimation?this.modal.addEventListener("animationend",function o(){e.classList.remove("is-open"),e.removeEventListener("animationend",o,!1)},!1):e.classList.remove("is-open")}},{key:"scrollBehaviour",value:function(e){if(this.config.disableScroll){var o=document.querySelector("body");switch(e){case"enable":Object.assign(o.style,{overflow:"initial",height:"initial"});break;case"disable":Object.assign(o.style,{overflow:"hidden",height:"100vh"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(e){e.target.hasAttribute(this.config.closeTrigger)&&(this.closeModal(),e.preventDefault())}},{key:"onKeydown",value:function(e){27===e.keyCode&&this.closeModal(e),9===e.keyCode&&this.maintainFocus(e)}},{key:"getFocusableNodes",value:function(){var e=this.modal.querySelectorAll(o);return Object.keys(e).map(function(o){return e[o]})}},{key:"setFocusToFirstNode",value:function(){if(!this.config.disableFocus){var e=this.getFocusableNodes();e.length&&e[0].focus()}}},{key:"maintainFocus",value:function(e){var o=this.getFocusableNodes();if(this.modal.contains(document.activeElement)){var t=o.indexOf(document.activeElement);e.shiftKey&&0===t&&(o[o.length-1].focus(),e.preventDefault()),e.shiftKey||t!==o.length-1||(o[0].focus(),e.preventDefault())}else o[0].focus()}}]),e}(),i=null,n=function(e){if(!document.getElementById(e))return console.warn("MicroModal v0.3.1: ❗Seems like you have missed %c'"+e+"'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'+e+'"></div>'),!1},a=function(e,o){if(function(e){e.length<=0&&(console.warn("MicroModal v0.3.1: ❗Please specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>'))}(e),!o)return!0;for(var t in o)n(t);return!0},{init:function(e){var o=Object.assign({},{openTrigger:"data-micromodal-trigger"},e),i=[].concat(r(document.querySelectorAll("["+o.openTrigger+"]"))),n=function(e,o){var t=[];return i.forEach(function(e){var i=e.attributes[o].value;void 0===t[i]&&(t[i]=[]),t[i].push(e)}),t}(0,o.openTrigger);if(!0!==o.debugMode||!1!==a(i,n))for(var s in n){var l=n[s];o.targetModal=s,o.triggers=[].concat(r(l)),new t(o)}},show:function(e,o){var a=o||{};a.targetModal=e,!0===a.debugMode&&!1===n(e)||(i=new t(a)).showModal()},close:function(){i.closeModal()}});let c=0;class h{constructor(){this.type="standard",this.open=!1}show(){this.open=!0,d.show(this.id)}close(){this.open=!1,d.close(this.id)}handleClose(e){this.open=!1,this.oClose.emit(e)}componentWillLoad(){this.id=`modal-${c}`,c+=1}componentDidLoad(){this.open&&this.show()}render(){let o="modal";return"danger"===this.type&&(o+=" is-modal-danger"),e("div",{class:o,id:this.id,"aria-hidden":"true"},e("div",{class:"modal--overlay",tabindex:"-1","data-micromodal-close":!0},e("div",{class:"modal--dialog",role:"dialog","aria-modal":"true","aria-labelledby":"modal-standard-title"},e("header",{class:"modal--header"},e("h1",{class:"modal--title"},this.modalTitle),e("button",{class:"modal--close","aria-label":"Close modal","data-micromodal-close":!0,onClick:this.handleClose.bind(this)})),e("main",{class:"modal--content"},e("slot",{name:"content"})),e("footer",{class:"modal--footer"},e("slot",{name:"footer"})))))}static get is(){return"o-modal"}static get properties(){return{close:{method:!0},el:{elementRef:!0},modalTitle:{type:String,attr:"modal-title"},open:{type:Boolean,attr:"open"},show:{method:!0},type:{type:String,attr:"type"}}}static get events(){return[{name:"oClose",method:"oClose",bubbles:!0,cancelable:!0,composed:!0}]}static get style(){return"\@font-face{font-family:Proxima Nova;font-style:normal;font-weight:300;src:url(/font/ProximaNova-Light.woff2) format(\"woff2\"),url(/font/ProximaNova-Light.woff) format(\"woff\")}\@font-face{font-family:Proxima Nova;font-style:normal;font-weight:400;src:url(/font/ProximaNova-Regular.woff2) format(\"woff2\"),url(/font/ProximaNova-Regular.woff) format(\"woff\")}\@font-face{font-family:Proxima Nova;font-style:normal;font-weight:600;src:url(/font/ProximaNova-Semibold.woff2) format(\"woff2\"),url(/font/ProximaNova-Semibold.woff) format(\"woff\")}.modal--overlay{display:-ms-flexbox;display:flex;position:fixed;top:0;right:0;bottom:0;left:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;background:rgba(47,63,74,.9)}.modal--dialog{position:relative;max-width:calc(50ch + 1.5rem + 1.5rem);max-height:calc(100vh - 3rem);padding:1.875rem 1.5rem 0;overflow-y:auto;border-radius:3px;background-color:#fff}.modal--dialog:before{content:\"\";position:absolute;top:0;left:0;width:100%;height:.375rem;background-color:#1662dd}.modal--header{display:-ms-flexbox;display:flex;-ms-flex-align:start;align-items:flex-start;-ms-flex-pack:justify;justify-content:space-between}.modal--close{width:1.5rem;height:1.5rem;padding:0;border:0;background-color:transparent;background-image:url(\"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2219%22%20height%3D%2219%22%20fill%3D%22none%22%3E%0A%20%20%3Cpath%20stroke%3D%22%232F3F4A%22%20stroke-width%3D%221.5%22%20d%3D%22M1%2018L18%201M18%2018L1%201%22%2F%3E%0A%3C%2Fsvg%3E%0A\");background-repeat:no-repeat;background-position:50%}.modal--title{margin-top:0;margin-bottom:0;color:#2f3f4a;font-size:1.30622rem;font-weight:600;line-height:1.25}.modal--content{padding:1.5rem 0 3rem;font-size:1rem}.modal--footer{display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;padding-bottom:1.5rem}.is-modal-danger .modal--dialog:before{background-color:#dd0744}\@-webkit-keyframes overlay-in{0%{opacity:0}to{opacity:1}}\@keyframes overlay-in{0%{opacity:0}to{opacity:1}}\@-webkit-keyframes overlay-out{0%{opacity:1}to{opacity:0}}\@keyframes overlay-out{0%{opacity:1}to{opacity:0}}\@-webkit-keyframes dialog-in{0%{-webkit-transform:scale(.7);transform:scale(.7);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:1}}\@keyframes dialog-in{0%{-webkit-transform:scale(.7);transform:scale(.7);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:1}}\@-webkit-keyframes dialog-out{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}to{-webkit-transform:scale(.7);transform:scale(.7);opacity:0}}\@keyframes dialog-out{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}to{-webkit-transform:scale(.7);transform:scale(.7);opacity:0}}.modal{display:none}.modal.is-open{display:block}.modal[aria-hidden=false] .modal--overlay{-webkit-animation:overlay-in .2s linear;animation:overlay-in .2s linear}.modal[aria-hidden=false] .modal--dialog{-webkit-animation:dialog-in .2s linear;animation:dialog-in .2s linear}.modal[aria-hidden=true] .modal--overlay{-webkit-animation:overlay-out .2s linear;animation:overlay-out .2s linear}.modal[aria-hidden=true][aria-hidden=true] .modal--dialog{-webkit-animation:dialog-out .2s linear;animation:dialog-out .2s linear}"}}export{h as OModal};